"use strict";(self.webpackChunkreact_consent_gdpr=self.webpackChunkreact_consent_gdpr||[]).push([[552],{"./storybook/stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AllCookieCategories:()=>AllCookieCategories,CookiesDetailsWithPrivacyUrl:()=>CookiesDetailsWithPrivacyUrl,CustomAutoHide:()=>CustomAutoHide,CustomCookieCategories:()=>CustomCookieCategories,DefaultCookieCategories:()=>DefaultCookieCategories,MatchCookiesInACategoryByARegexp:()=>MatchCookiesInACategoryByARegexp,MatchCookiesInACategoryByAValidationFunction:()=>MatchCookiesInACategoryByAValidationFunction,default:()=>stories});var react=__webpack_require__("./node_modules/react/index.js"),objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),ThemeProvider=__webpack_require__("./node_modules/@mui/material/styles/ThemeProvider.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),Box=__webpack_require__("./node_modules/@mui/material/Box/Box.js"),Snackbar=__webpack_require__("./node_modules/@mui/material/Snackbar/Snackbar.js"),anchorOrigin={vertical:"bottom",horizontal:"center"},Button=__webpack_require__("./node_modules/@mui/material/Button/Button.js");function EditConsentButton(props){var onClick=props.onClick;return react.createElement(Button.Z,{onClick:onClick},"Change consent")}var sx={whiteSpace:"nowrap"};function NoBr(props){var children=props.children;return react.createElement(Box.Z,{component:"span",sx:sx},children)}var RELOAD_KEY="reaload_react-consent-gdpr";function markReload(){localStorage.setItem(RELOAD_KEY,"just reloaded")}function isReloaded(){return!!localStorage.getItem(RELOAD_KEY)&&(localStorage.removeItem(RELOAD_KEY),!0)}var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js");function getCookiesNames(){if(!document.cookie)return[];for(var cookies=[],split=document.cookie.split(";"),i=0;i<split.length;i++){var nameValue=split[i].split("=");nameValue[0]=nameValue[0].replace(/^ /,""),cookies.push(decodeURIComponent(nameValue[0]))}return cookies}function getToday(){var nowTs=new Date,year=nowTs.getFullYear(),month=nowTs.getMonth()+1,day=nowTs.getDate();return"".concat(year,"-").concat(getWith2Digits(month),"-").concat(getWith2Digits(day))}function getWith2Digits(x){return x<10?"0".concat(x):"".concat(x)}function getConsentCategories(consent){var arr=[];return consent.marketing&&arr.push("marketing"),consent.necessary&&arr.push("necessary"),consent.others&&arr.push("others"),consent.preferences&&arr.push("preferences"),consent.statistics&&arr.push("statistics"),arr}var LOCAL_STORAGE_KEY="react-consent-gdpr";function isConsentSet(){return!!localStorage.getItem(LOCAL_STORAGE_KEY)}function useGdprConsent(){var _useState=(0,react.useState)(getConsent()),_useState2=(0,slicedToArray.Z)(_useState,2),consent=_useState2[0],setLocalConsent=_useState2[1];return[consent,(0,react.useCallback)(function(consent){setConsent((0,objectSpread2.Z)((0,objectSpread2.Z)({},consent),{},{lastConsentDate:getToday()})),setLocalConsent(getConsent())},[])]}function getConsent(){var raw=localStorage.getItem(LOCAL_STORAGE_KEY);if(!raw)return getAndSetEmptyConsent();try{return JSON.parse(raw)}catch(e){return getAndSetEmptyConsent()}}function setConsent(consent){localStorage.setItem(LOCAL_STORAGE_KEY,JSON.stringify(consent))}function getAndSetEmptyConsent(){var emptyConsent={lastConsentDate:getToday()};return setConsent(emptyConsent),emptyConsent}var PRE_MESSAGE="You already accepted usage of our cookies";function ConsentProvided(props){var _props$autoHideDurati=props.autoHideDuration,onEdit=props.onEdit,_useState=(0,react.useState)(!0),_useState2=(0,slicedToArray.Z)(_useState,2),isOpen=_useState2[0],setIsOpen=_useState2[1],_useGdprConsent=useGdprConsent(),lastConsentDate=(0,slicedToArray.Z)(_useGdprConsent,1)[0].lastConsentDate,text=(0,react.useMemo)(function(){if(!lastConsentDate)return"".concat(PRE_MESSAGE).concat(".");var onDate=lastConsentDate?" on ".concat(lastConsentDate):"";return react.createElement(Box.Z,null,PRE_MESSAGE,react.createElement(NoBr,null,onDate),".")},[lastConsentDate]),handleClose=(0,react.useCallback)(function(){setIsOpen(!1)},[]);return isReloaded()?null:react.createElement(Snackbar.Z,{action:react.createElement(EditConsentButton,{onClick:onEdit}),anchorOrigin:anchorOrigin,autoHideDuration:void 0===_props$autoHideDurati?2e3:_props$autoHideDurati,message:text,onClose:handleClose,open:isOpen})}var Stack=__webpack_require__("./node_modules/@mui/material/Stack/Stack.js"),useTheme=__webpack_require__("./node_modules/@mui/material/styles/useTheme.js"),useMediaQuery=__webpack_require__("./node_modules/@mui/material/useMediaQuery/useMediaQuery.js"),Dialog=__webpack_require__("./node_modules/@mui/material/Dialog/Dialog.js"),DialogContent=__webpack_require__("./node_modules/@mui/material/DialogContent/DialogContent.js"),DialogTitle=__webpack_require__("./node_modules/@mui/material/DialogTitle/DialogTitle.js"),Grid=__webpack_require__("./node_modules/@mui/material/Grid/Grid.js"),Link=__webpack_require__("./node_modules/@mui/material/Link/Link.js"),FoundCookieDetail_sx={root:function root(_ref){return{width:"100%",padding:.5,borderRadius:"2px",border:"solid 1px transparent","&:not(:last-child)":{marginBottom:1},"&:hover":{borderColor:_ref.palette.text.primary}}},description:{fontSize:"70%"},ellipsis:{overflow:"hidden",textOverflow:"ellipsis"}};function FoundCookieDetail(props){var _props$cookie=props.cookie,name=_props$cookie.name,description=_props$cookie.description,privacyUrl=_props$cookie.privacyUrl,source=_props$cookie.source;return react.createElement(Grid.ZP,{container:!0,sx:FoundCookieDetail_sx.root},react.createElement(Grid.ZP,{item:!0,sm:3,xs:12,sx:FoundCookieDetail_sx.ellipsis},react.createElement(NoBr,null,name)),react.createElement(Grid.ZP,{item:!0,sm:3,xs:12,textAlign:"center",sx:FoundCookieDetail_sx.ellipsis},privacyUrl?react.createElement(Link.Z,{href:privacyUrl,target:"_blank"},react.createElement(NoBr,null,source)):react.createElement(NoBr,null,source)),react.createElement(Grid.ZP,{item:!0,sm:6,xs:12,display:"flex",alignItems:"center"},react.createElement(Box.Z,{sx:FoundCookieDetail_sx.description},description)))}function CookiesDetails(props){var foundCookies=props.foundCookies;return react.createElement(react.Fragment,null,foundCookies.map(function(foundCookie){return react.createElement(FoundCookieDetail,{key:foundCookie.name,cookie:foundCookie})}))}var Typography=__webpack_require__("./node_modules/@mui/material/Typography/Typography.js"),Cancel=__webpack_require__("./node_modules/@mui/icons-material/Cancel.js"),IconButton=__webpack_require__("./node_modules/@mui/material/IconButton/IconButton.js");function CancelIconButton(props){var onClick=props.onClick;return react.createElement(IconButton.Z,{size:"small",onClick:onClick,title:"Close"},react.createElement(Cancel.Z,{color:"primary"}))}var CookiesDetailsHeader_sx={backgroundColor:function backgroundColor(_ref){return _ref.palette.background.paper},position:"sticky",top:function top(_ref2){return(0,_ref2.spacing)(2)}};function CookiesDetailsHeader(props){var label=props.label,onClose=props.onClose;return react.createElement(Stack.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:CookiesDetailsHeader_sx},react.createElement(Typography.Z,{variant:"body1"},label),react.createElement(CancelIconButton,{onClick:onClose}))}var CookiesDetailsDialog_sx={maxHeight:"80vh"};function CookiesDetailsDialog(props){var foundCookies=props.foundCookies,label=props.label,isOpen=props.isOpen,onClose=props.onClose;return react.createElement(Dialog.Z,{onClose:onClose,open:isOpen,fullWidth:!0,maxWidth:"md",scroll:"paper",sx:CookiesDetailsDialog_sx},react.createElement(DialogTitle.Z,null,react.createElement(CookiesDetailsHeader,{label:label,onClose:onClose})),react.createElement(DialogContent.Z,null,react.createElement(CookiesDetails,{foundCookies:foundCookies})),react.createElement(Box.Z,null,"Â "))}var Switch=__webpack_require__("./node_modules/@mui/material/Switch/Switch.js"),Chip=__webpack_require__("./node_modules/@mui/material/Chip/Chip.js"),TypeCookieChip_sx={fontSize:"70%"};function TypeCookieChip(props){var label=props.label,foundCookies=props.foundCookies,onShowDetails=props.onShowDetails,handleClick=(0,react.useCallback)(function(){onShowDetails(label,foundCookies)},[label,foundCookies,onShowDetails]);return react.createElement(Chip.Z,{label:foundCookies.length,color:"primary",size:"small",variant:"outlined",clickable:foundCookies.length>0,sx:TypeCookieChip_sx,title:"Click to see details",onClick:foundCookies.length>0?handleClick:void 0})}var Tooltip=__webpack_require__("./node_modules/@mui/material/Tooltip/Tooltip.js");function TypeCookieText(props){var label=props.label,tooltip=props.tooltip;return react.createElement(Tooltip.Z,{arrow:!0,enterDelay:500,title:tooltip},react.createElement(Typography.Z,{variant:"body2"},label))}var TypeCookieLabel_sx={alignItems:"center"};function TypeCookieLabel(props){var foundCookies=props.foundCookies,label=props.label,onShowDetails=props.onShowDetails,tooltip=props.tooltip;return react.createElement(Stack.Z,{direction:"row",gap:.5,sx:TypeCookieLabel_sx},react.createElement(TypeCookieText,{tooltip:tooltip,label:label}),void 0!==foundCookies?react.createElement(TypeCookieChip,{label:label,foundCookies:foundCookies,onShowDetails:onShowDetails}):null)}function _instanceof(left,right){return null!=right&&"undefined"!=typeof Symbol&&right[Symbol.hasInstance]?!!right[Symbol.hasInstance](left):left instanceof right}function isMatch(cookieName,validator){return"string"==typeof validator?cookieName===validator:_instanceof(validator,RegExp)?validator.test(cookieName):"function"==typeof validator&&validator(cookieName)}function TypeCookieCheckbox(props){var checked=props.checked,knownCookies=props.cookies,description=props.description,id=props.id,label=props.label,onChange=props.onChange,onShowDetails=props.onShowDetails,foundCookies=(0,react.useMemo)(function(){var foundCookies=[];return getCookiesNames().forEach(function(cookie){var found=knownCookies.find(function(_ref){return isMatch(cookie,_ref.name)});found&&foundCookies.push((0,objectSpread2.Z)((0,objectSpread2.Z)({},found),{},{name:cookie}))}),foundCookies},[knownCookies]),handleChange=(0,react.useCallback)(function(_,checked){null==onChange||onChange(id,checked)},[id,onChange]);return react.createElement(Stack.Z,{direction:"row"},react.createElement(Switch.Z,{checked:checked,disabled:void 0===onChange,onChange:handleChange}),react.createElement(TypeCookieLabel,{foundCookies:knownCookies.length>0?foundCookies:void 0,label:label,tooltip:description,onShowDetails:onShowDetails}))}function MarketingCookieCheckbox(props){var checked=props.checked,cookies=props.cookies,onChange=props.onChange,onShowDetails=props.onShowDetails;return react.createElement(TypeCookieCheckbox,{id:"marketing",checked:checked,label:"Marketing",description:"Marketing cookies are used to track visitors across websites. The intention is to display ads that are relevant and engaging for the individual user and thereby more valuable for publishers and third party advertisers.",cookies:cookies,onChange:onChange,onShowDetails:onShowDetails})}function NecessaryCookieCheckbox(props){var cookies=props.cookies,onShowDetails=props.onShowDetails;return react.createElement(TypeCookieCheckbox,{id:"necessary",checked:!0,label:"Necessary",description:"Necessary cookies help make a website usable by enabling basic functions like page navigation and access to secure areas of the website. The website cannot function properly without these cookies.",cookies:cookies,onShowDetails:onShowDetails})}function OthersCookieCheckbox(props){var checked=props.checked,cookies=props.cookies,onChange=props.onChange,onShowDetails=props.onShowDetails;return react.createElement(TypeCookieCheckbox,{id:"others",checked:checked,label:"Others",description:"Others cookies are cookies that cannot be placed in any other category.",cookies:cookies,onChange:onChange,onShowDetails:onShowDetails})}function PreferencesCookieCheckbox(props){var checked=props.checked,cookies=props.cookies,onChange=props.onChange,onShowDetails=props.onShowDetails;return react.createElement(TypeCookieCheckbox,{id:"preferences",checked:checked,label:"Preferences",description:"Preference cookies enable a website to remember information that changes the way the website behaves or looks, like your preferred language or the region that you are in.",cookies:cookies,onChange:onChange,onShowDetails:onShowDetails})}function StatisticsCookieCheckbox(props){var checked=props.checked,cookies=props.cookies,onChange=props.onChange,onShowDetails=props.onShowDetails;return react.createElement(TypeCookieCheckbox,{id:"statistics",checked:checked,label:"Statistics",description:"Statistic cookies help website owners to understand how visitors interact with websites by collecting and reporting information anonymously.",cookies:cookies,onChange:onChange,onShowDetails:onShowDetails})}function ListTypeCookies(props){var cookies=props.cookies,onChange=props.onChange,cookiesNecessary=cookies.necessary,cookiesMarketing=cookies.marketing,cookiesOthers=cookies.others,cookiesPreferences=cookies.preferences,cookiesStatistics=cookies.statistics,_useGdprConsent=useGdprConsent(),_useGdprConsent2=(0,slicedToArray.Z)(_useGdprConsent,2),consent=_useGdprConsent2[0],setConsent=_useGdprConsent2[1],_consent$marketing=consent.marketing,_consent$others=consent.others,_consent$preferences=consent.preferences,_consent$statistics=consent.statistics,handleChange=(0,react.useCallback)(function(id,checked){var newConsent=(0,objectSpread2.Z)({},consent);checked?newConsent[id]=!0:delete newConsent[id],setConsent(newConsent),null==onChange||onChange(getConsentCategories(newConsent))},[consent]),_useState=(0,react.useState)(),_useState2=(0,slicedToArray.Z)(_useState,2),categoryAndFoundCookies=_useState2[0],setCategoryAndFoundCookies=_useState2[1],handleShowDetails=(0,react.useCallback)(function(category,foundCookies){setCategoryAndFoundCookies({category:category,foundCookies:foundCookies})},[]),handleCloseDetails=(0,react.useCallback)(function(){setCategoryAndFoundCookies(void 0)},[]),theme=(0,useTheme.Z)(),matches=(0,useMediaQuery.Z)(theme.breakpoints.down("sm"));return react.createElement(react.Fragment,null,react.createElement(Stack.Z,{direction:"row",columnGap:2,rowGap:.5,flexWrap:matches?"wrap":void 0,justifyContent:"center"},cookiesNecessary&&react.createElement(NecessaryCookieCheckbox,{cookies:cookiesNecessary,onShowDetails:handleShowDetails}),cookiesPreferences&&react.createElement(PreferencesCookieCheckbox,{checked:void 0!==_consent$preferences&&_consent$preferences,cookies:cookiesPreferences,onChange:handleChange,onShowDetails:handleShowDetails}),cookiesStatistics&&react.createElement(StatisticsCookieCheckbox,{checked:void 0!==_consent$statistics&&_consent$statistics,cookies:cookiesStatistics,onChange:handleChange,onShowDetails:handleShowDetails}),cookiesMarketing&&react.createElement(MarketingCookieCheckbox,{checked:void 0!==_consent$marketing&&_consent$marketing,cookies:cookiesMarketing,onChange:handleChange,onShowDetails:handleShowDetails}),cookiesOthers&&react.createElement(OthersCookieCheckbox,{checked:void 0!==_consent$others&&_consent$others,cookies:cookiesOthers,onChange:handleChange,onShowDetails:handleShowDetails})),categoryAndFoundCookies&&react.createElement(CookiesDetailsDialog,{foundCookies:categoryAndFoundCookies.foundCookies,label:categoryAndFoundCookies.category,isOpen:!0,onClose:handleCloseDetails}))}function WeUseCookiesText(){return react.createElement(Tooltip.Z,{title:"We use cookies to personalize content and ads, provide social media features and to analyze the access to our website. In addition, we provide information about your use of our website to our social media partners, advertising and analysis. Our partners may combine this information with other data you provide to them or that they have collected as part of your use of their services."},react.createElement(Typography.Z,{component:"span",variant:"body2"},"Our web site uses the following types of cookies:"))}function RequestConsentHeader(props){var onCancel=props.onCancel;return react.createElement(Stack.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",gap:2},react.createElement(WeUseCookiesText,null),react.createElement(CancelIconButton,{onClick:onCancel}))}function RequestConsent(props){var cookies=props.cookies,onChange=props.onChange,_useGdprConsent=useGdprConsent(),consent=(0,slicedToArray.Z)(_useGdprConsent,1)[0],_useState=(0,react.useState)(!0),_useState2=(0,slicedToArray.Z)(_useState,2),isOpen=_useState2[0],setIsOpen=_useState2[1],handleClose=(0,react.useCallback)(function(){setIsOpen(!1)},[]),handlePageReload=(0,react.useCallback)(function(){markReload(),window.location.reload()},[consent]);return react.createElement(Snackbar.Z,{anchorOrigin:anchorOrigin,autoHideDuration:null,message:react.createElement(Stack.Z,{direction:"column"},react.createElement(RequestConsentHeader,{onCancel:handlePageReload}),react.createElement(ListTypeCookies,{cookies:cookies,onChange:onChange})),open:isOpen,onClose:handleClose})}var defaultCookies={marketing:[],necessary:[],preferences:[],statistics:[]};function ReactConsent(props){var autoHideDuration=props.autoHideDuration,_props$cookies=props.cookies,onChange=props.onChange,_useState=(0,react.useState)(!isConsentSet()),_useState2=(0,slicedToArray.Z)(_useState,2),editConsent=_useState2[0],setEditConsent=_useState2[1],handleEditConsent=(0,react.useCallback)(function(){setEditConsent(!0)},[]);return editConsent?react.createElement(RequestConsent,{cookies:void 0===_props$cookies?defaultCookies:_props$cookies,onChange:onChange}):react.createElement(ConsentProvided,{autoHideDuration:autoHideDuration,onEdit:handleEditConsent})}var _excluded=["theme"];let src_ReactConsentGdpr=function(props){var theme=props.theme,rest=(0,objectWithoutProperties.Z)(props,_excluded);return theme?react.createElement(ThemeProvider.Z,{theme:theme},react.createElement(ReactConsent,rest)):react.createElement(ReactConsent,rest)};var style={display:"grid",gridTemplateColumns:"repeat(2, minmax(300px ,500px))"};let stories={title:"ReactConsentGdpr",component:src_ReactConsentGdpr};var DefaultCookieCategories=function(){return react.createElement("div",{style:style},react.createElement(src_ReactConsentGdpr,null))},AllCookieCategories=function(){return react.createElement("div",{style:style},react.createElement(src_ReactConsentGdpr,{cookies:{marketing:[],necessary:[{name:"_pk_id.8.1fff",source:"Matomo",description:"13 months (used to store a few details about the user such as the unique visitor ID)"}],others:[],preferences:[],statistics:[]}}))},CustomCookieCategories=function(){return react.createElement("div",{style:style},react.createElement(src_ReactConsentGdpr,{cookies:{necessary:[],statistics:[]}}))},CustomAutoHide=function(){return react.createElement("div",{style:style},react.createElement(src_ReactConsentGdpr,{cookies:{necessary:[{name:"_pk_id.8.1fff",source:"Matomo",description:"13 months (used to store a few details about the user such as the unique visitor ID)"}]}}))},MatchCookiesInACategoryByARegexp=function(){return react.createElement("div",{style:style},react.createElement(src_ReactConsentGdpr,{cookies:{necessary:[{name:/^_pk_id\./,source:"Matomo",description:"13 months (used to store a few details about the user such as the unique visitor ID)"}]}}))},MatchCookiesInACategoryByAValidationFunction=function(){return react.createElement("div",{style:style},react.createElement(src_ReactConsentGdpr,{cookies:{necessary:[{name:function name(_name){return/^_pk_id\./.test(_name)},source:"Matomo",description:"13 months (used to store a few details about the user such as the unique visitor ID)"}]}}))},CookiesDetailsWithPrivacyUrl=function(){return react.createElement("div",{style:style},react.createElement(src_ReactConsentGdpr,{cookies:{necessary:[{name:function name(_name2){return/^_pk_id\./.test(_name2)},source:"Matomo",description:"13 months (used to store a few details about the user such as the unique visitor ID)",privacyUrl:"https://matomo.org/privacy-policy/"}]}}))}}}]);